<section class="site-container section-spacing">
    <div class="max-w-[1144px] mx-auto flex flex-col items-center gap-[40px] md:gap-[60px] xl:gap-[80px]">
        <p
            class="text-base md:text-xl max-w-[65ch] text-center font-medium md:font-normal text-ai-gray-850 leading-[1.5] m-0">
            Wir suchen neugierige Köpfe mit vielfältigen Hintergründen und Perspektiven und freuen uns auch über Initiativbewerbungen an
            <a href="mailto:careers@aintegrator.ch" class="text-base md:text-xl text-ai-gray-900 underline">
                careers@aintegrator.ch
            </a>
        </p>
        <div class="flex gap-[6px] md:gap-[24px] justify-center items-center w-full">
            <div class="relative">
                <button type="button"
                    class="px-4 py-2 md:px-6 md:py-3 rounded-[24px] bg-ai-gray-100 flex items-center justify-center gap-[8px] border-0 cursor-pointer"
                    aria-label="Department auswählen" (click)="toggleDepartmentDropdown()">
                    <span class="text-base text-ai-gray-850">{{ selectedDepartment }}</span>
                    <img src="assets/icons/Arrow.png" alt="" class="w-6 h-6" [class.rotate-180]="isDepartmentOpen">
                </button>
                @if (isDepartmentOpen) {
                <div class="absolute z-20 mt-2 min-w-full rounded-[12px] border border-ai-gray-650 bg-white p-2">
                    @for (dept of departmentOptions; track dept) {
                    <button type="button"
                        class="w-full text-left px-3 py-2 rounded-[8px] bg-transparent border-0 cursor-pointer hover:bg-ai-gray-100 transition-colors text-base text-ai-gray-850"
                        (click)="setDepartment(dept)">
                        {{ dept }}
                    </button>
                    }
                </div>
                }
            </div>

            <div class="relative">
                <button type="button"
                    class="px-4 py-2 md:px-6 md:py-3 rounded-[24px] bg-ai-gray-100 flex items-center justify-center gap-[8px] border-0 cursor-pointer"
                    aria-label="Standort auswählen" (click)="toggleLocationDropdown()">
                    <span class="text-base text-ai-gray-850">{{ selectedLocation }}</span>
                    <img src="assets/icons/Arrow.png" alt="" class="w-6 h-6" [class.rotate-180]="isLocationOpen">
                </button>
                @if (isLocationOpen) {
                <div class="absolute z-20 mt-2 min-w-full rounded-[12px] border border-ai-gray-650 bg-white p-2">
                    @for (loc of locationOptions; track loc) {
                    <button type="button"
                        class="w-full text-left px-3 py-2 rounded-[8px] bg-transparent border-0 cursor-pointer hover:bg-ai-gray-100 transition-colors text-base text-ai-gray-850"
                        (click)="setLocation(loc)">
                        {{ loc }}
                    </button>
                    }
                </div>
                }
            </div>
        </div>

        <div class="flex flex-col gap-[32px] md:gap-[40px] w-full max-w-[354px] md:max-w-full mx-auto"
            *ngIf="filteredRoles.length > 0; else emptyState">
            @for (role of filteredRoles; track role.title) {
            <div
                class="flex flex-col md:flex-row justify-between items-start md:items-center border-b border-ai-gray-650 pb-[32px] md:pb-[40px] gap-[24px] md:gap-0 last:border-b-0 last:pb-0">
                <span class="text-base font-medium text-ai-gray-1000">
                    {{ role.title }}
                </span>
                <div
                    class="flex flex-col md:flex-row items-start md:items-center gap-[24px] md:gap-[48px] xl:gap-[120px] w-full md:w-auto">
                    <span class="text-base text-ai-gray-850 font-medium">
                        {{ role.location }}
                    </span>
                    <a [href]="role.link"
                        class="text-[#D32F2F] text-base font-medium flex items-center no-underline leading-[26px] arrow-link">
                        Jetzt bewerben
                        <img src="assets/icons/Frame.svg" alt="Apply" class="max-md:w-[28px] max-md:h-[28px] arrow-link-icon">
                    </a>
                </div>
            </div>
            }
        </div>

        <ng-template #emptyState>
            <p class="text-base text-ai-gray-1000 text-center">
                Aktuell keine offenen Positionen.
            </p>
        </ng-template>
    </div>
</section>